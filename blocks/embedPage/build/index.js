(()=>{"use strict";var e,n={397:(e,n,t)=>{const s=window.wp.blocks,o=window.wp.i18n,r=window.wp.blockEditor,i=window.wp.element,a=window.wp.components,c=window.wp.htmlEntities,l=window.wp.apiFetch;var d=t.n(l);const p=window.ReactJSXRuntime,h=JSON.parse('{"UU":"sim/embed-page"}');(0,s.registerBlockType)(h.UU,{icon:"embed-generic",edit:({attributes:e,setAttributes:n})=>{const{page:t,hide:s,newline:l,content:h}=e;let u,b=(0,o.__)("Please select a page...","sim"),m={};try{m=JSON.parse(t)}catch(e){console.error("not a valid page")}console.log(m.post_content),u=null==m.post_content||null==h?b:wp.element.RawHTML({children:m.post_content});const[g,w]=(0,i.useState)(""),[x,f]=(0,i.useState)(u),[v,j]=(0,i.useState)(!1),_=async function(e,t=s,o=l){f((0,p.jsx)(a.Spinner,{})),u=await d()({path:sim.restApiPrefix+"/embedpage/result",method:"POST",data:{id:e,collapsible:t,linebreak:o}}),""==u.trim()&&(u="<div class='error'>Empty post</div>"),n({content:u}),f(wp.element.RawHTML({children:u}))};(0,i.useEffect)((()=>{!async function(){j(!1);const e=await d()({path:sim.restApiPrefix+"/embedpage/find",method:"POST",data:{search:g}});j(e)}()}),[g]);const k=async function(e,t){e?(_(t.ID),n({page:JSON.stringify(t)})):(n({page:null}),f(b))},C=function(){return"{}"==t?"":(0,p.jsxs)(p.Fragment,{children:["Currently embeded page:",(0,p.jsx)(a.CheckboxControl,{label:(0,c.decodeEntities)(m.post_title),onChange:e=>k(e,m),checked:!0}),(0,p.jsx)("a",{href:`${sim.baseUrl}/wp-admin/post.php?post=${m.ID}&action=edit`,children:"Edit embeded page here"}),(0,p.jsx)("br",{}),(0,p.jsx)("br",{})]})},y=function({pageList:n}){return v?n?.length?v?.map((n=>(0,p.jsx)(a.CheckboxControl,{label:(0,c.decodeEntities)(n.post_title),onChange:e=>k(e,n),checked:e.page==n}))):g?(0,p.jsxs)("div",{children:[" ",(0,o.__)("No search results","sim")]}):"":(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(a.Spinner,{}),(0,p.jsx)("br",{})]})},O=e=>x!=b&&e?"":(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(a.SearchControl,{onChange:w,value:g,autoFocus:!0}),(0,p.jsx)(y,{pageList:v})]});return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(r.InspectorControls,{children:(0,p.jsxs)(a.PanelBody,{title:(0,o.__)("Page Embed Settings","sim"),children:[(0,p.jsx)(a.CheckboxControl,{label:(0,o.__)("Only show contents on hover"),onChange:e=>async function(e){n({hide:e}),_(m.ID,e)}(e),checked:s}),(0,p.jsx)(a.CheckboxControl,{label:(0,o.__)("Add a line break"),onChange:e=>async function(e){n({newline:e}),_(m.ID,s,e)}(e),checked:l}),(0,p.jsx)(C,{}),(0,p.jsx)("i",{children:(0,o.__)("Use searchbox below to search for a page","sim")}),O(!1)]})}),(0,p.jsxs)("div",{...(0,r.useBlockProps)(),children:[O(!0),x]})]})},save:()=>null})}},t={};function s(e){var o=t[e];if(void 0!==o)return o.exports;var r=t[e]={exports:{}};return n[e](r,r.exports,s),r.exports}s.m=n,e=[],s.O=(n,t,o,r)=>{if(!t){var i=1/0;for(d=0;d<e.length;d++){t=e[d][0],o=e[d][1],r=e[d][2];for(var a=!0,c=0;c<t.length;c++)(!1&r||i>=r)&&Object.keys(s.O).every((e=>s.O[e](t[c])))?t.splice(c--,1):(a=!1,r<i&&(i=r));if(a){e.splice(d--,1);var l=o();void 0!==l&&(n=l)}}return n}r=r||0;for(var d=e.length;d>0&&e[d-1][2]>r;d--)e[d]=e[d-1];e[d]=[t,o,r]},s.n=e=>{var n=e&&e.__esModule?()=>e.default:()=>e;return s.d(n,{a:n}),n},s.d=(e,n)=>{for(var t in n)s.o(n,t)&&!s.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:n[t]})},s.o=(e,n)=>Object.prototype.hasOwnProperty.call(e,n),(()=>{var e={57:0,350:0};s.O.j=n=>0===e[n];var n=(n,t)=>{var o,r,i=t[0],a=t[1],c=t[2],l=0;if(i.some((n=>0!==e[n]))){for(o in a)s.o(a,o)&&(s.m[o]=a[o]);if(c)var d=c(s)}for(n&&n(t);l<i.length;l++)r=i[l],s.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return s.O(d)},t=self.webpackChunksim_embed_page=self.webpackChunksim_embed_page||[];t.forEach(n.bind(null,0)),t.push=n.bind(null,t.push.bind(t))})();var o=s.O(void 0,[350],(()=>s(397)));o=s.O(o)})();